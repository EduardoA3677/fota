# Samsung OTA Firmware Downloader

Python scripts for downloading Samsung firmware OTA updates, generated from smali analysis of Samsung FOTA agent.

## Overview

These scripts were automatically generated by analyzing 5,212+ smali files from the Samsung FOTA (Firmware Over-The-Air) agent. They replicate the firmware download process used by Samsung devices.

## Files

- **`ota_downloader.py`** - Main script and orchestrator
- **`samsung_api.py`** - Samsung OTA API client
- **`firmware_manager.py`** - Firmware version management
- **`device_info.py`** - Device information handling
- **`utils.py`** - Utility functions

## Installation

### Prerequisites

- Python 3.7 or higher
- `requests` library

### Install Dependencies

```bash
pip install requests
```

Or install from requirements (if created):

```bash
pip install -r requirements.txt
```

## Usage

### Basic Usage

Run the main downloader script:

```bash
python ota_downloader.py
```

The script will interactively ask for:
1. **IMEI** (15 digits)
2. **Device Model** (e.g., SM-S916B)
3. **CSC/Region Code** (e.g., XEU)
4. **Current Firmware Version** (e.g., S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5)

### Command Line Options

```bash
# Specify output directory
python ota_downloader.py --output ./downloads

# Enable verbose logging
python ota_downloader.py --verbose

# Show help
python ota_downloader.py --help
```

## Example Session

```
============================================================
  Samsung OTA Firmware Downloader
  Based on smali analysis of FOTA agent
============================================================

=== Samsung OTA Device Information ===

Enter IMEI (15 digits): 123456789012345
Enter Device Model (e.g., SM-S916B): SM-S916B
Enter CSC/Region Code (3 letters, e.g., XEU): XEU
Enter Current Firmware Version: S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5

=== Checking for firmware updates ===

✓ Update available!
  Latest version: S916BXXS9EYK1/S916BOXM9EYK1/S916BXXU9EYK1
  Size: 3.00 GB

Do you want to download this firmware? (y/n): y

=== Downloading firmware ===
  URL: https://fota-cloud-dn.ospserver.net/firmware/...
  Output: ./firmware/SM-S916B_S916BXXS9EYK1_S916BOXM9EYK1_S916BXXU9EYK1.zip

  [████████████████████████████████████████████████] 100.0% (3.00 GB/3.00 GB)

✓ Firmware downloaded successfully!
  Location: ./firmware/SM-S916B_S916BXXS9EYK1_S916BOXM9EYK1_S916BXXU9EYK1.zip
```

## Module Usage

### Using Individual Modules

You can also use the modules programmatically:

#### Check for Updates

```python
from samsung_api import SamsungOTAClient

client = SamsungOTAClient()
has_update, info = client.check_for_updates(
    csc="XEU",
    model="SM-S916B",
    current_version="S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5"
)

if has_update:
    print(f"Update available: {info['version']}")

client.close()
```

#### Manage Device Info

```python
from device_info import DeviceInfo

device = DeviceInfo()
device.set_device_id("123456789012345")
device.set_model_id("SM-S916B")
device.set_customer_code("XEU")
device.set_firmware_version("S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5")

device.build_nodes()
params = device.get_request_params()
```

#### Manage Firmware Versions

```python
from firmware_manager import FirmwareManager, FirmwareVersion

manager = FirmwareManager()
manager.set_current_version("S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5")
manager.add_available_version("S916BXXS9EYK1/S916BOXM9EYK1/S916BXXU9EYK1")

is_update = manager.is_update_available("S916BXXS9EYK1/S916BOXM9EYK1/S916BXXU9EYK1")
```

## Architecture

### Data Flow

```
User Input → DeviceInfo → SamsungOTAClient → FirmwareManager → Download
```

### Class Hierarchy

- **OTADownloader** - Main orchestrator
  - Uses: DeviceInfo, SamsungOTAClient, FirmwareManager
- **SamsungOTAClient** - Handles API communication
  - Endpoint: `https://fota-cloud-dn.ospserver.net/firmware/`
- **FirmwareManager** - Manages firmware versions
- **DeviceInfo** - Manages device parameters
- **DeviceNode** - Represents a single parameter

## API Endpoints

Based on smali analysis:

### Base URL
```
https://fota-cloud-dn.ospserver.net/firmware/
```

### URL Pattern
```
{base_url}{CSC}/{MODEL}/{target_file}
```

### Example
```
https://fota-cloud-dn.ospserver.net/firmware/XEU/SM-S916B/version.xml
```

## Device Parameters

### Required Parameters

| Parameter | Description | Example |
|-----------|-------------|---------|
| IMEI | Device identifier | 123456789012345 |
| Model | Device model | SM-S916B |
| CSC | Customer Service Code | XEU |
| Firmware Version | Current version | S916BXXS8EYJ3/... |

### Common CSC Codes

- **XEU** - Europe (Generic)
- **DBT** - Germany
- **BTU** - United Kingdom
- **XAR** - United States
- **KOO** - Korea

## Firmware Version Format

Samsung firmware versions have three parts:

```
PDA/CSC/PHONE
```

Example: `S916BXXS8EYJ3/S916BOXM8EYJ3/S916BXXU8EYI5`

- **PDA**: Primary Display Area (core system)
- **CSC**: Customer Service Code (regional customizations)
- **PHONE**: Phone/modem firmware

## Troubleshooting

### HTTP 404 Error
- Firmware not available for CSC/Model combination
- Try alternative CSC code for your region

### Invalid IMEI
- Must be exactly 15 digits
- Must contain only numbers

### Connection Timeout
- OTA server may be temporarily unavailable
- Check internet connection

### Version Format Error
- Ensure format is: `XXX/YYY/ZZZ`
- Three parts separated by slashes

## Legal Notice

⚠️ **For Educational and Research Purposes Only**

- Firmware files are copyrighted by Samsung Electronics
- Use only for devices you own
- Respect Samsung's terms of service
- Do not abuse or overload Samsung servers

## Source

These scripts were generated from smali analysis of:
- Package: `com.idm.fotaagent`
- Package: `com.samsung.android.fotaagent`
- Total files analyzed: 5,212 smali files

See `../ANALYSIS_REPORT.md` for detailed analysis.

## Contributing

This is a generated codebase. For issues or improvements:
1. Review the smali analysis in `ANALYSIS_REPORT.md`
2. Update the generator logic
3. Regenerate scripts

## License

These scripts are provided as-is for educational purposes. Samsung firmware is proprietary and subject to Samsung's licensing terms.

## Links

- **Repository**: https://github.com/EduardoA3677/fota
- **Analysis Report**: ../ANALYSIS_REPORT.md
- **Smali Files**: ../classes2_smali/

---

Generated from smali analysis - November 16, 2025
